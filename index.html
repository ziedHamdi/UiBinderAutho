<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>UiBinderAutho by ziedHamdi</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>UiBinderAutho</h1>
        <h2>GWT UiBinder authorization code : how is it thought, and what is  ready to use?</h2>
        <a href="https://github.com/ziedHamdi/UiBinderAutho" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h3>
<a name="welcome-to-uibinderautho-the-automatic-part-of-the-uibinderauth-project" class="anchor" href="#welcome-to-uibinderautho-the-automatic-part-of-the-uibinderauth-project"><span class="octicon octicon-link"></span></a>Welcome to UiBinderAutho the automatic part of the UiBinderAuth project.</h3>

<p>This project is a concrete implementation that uses the low level feature added by <a href="https://github.com/ziedHamdi/UiBinderAuth">UiBinderAuth</a>. While the <a href="https://github.com/ziedHamdi/UiBinderAuth">UiBinderAuth</a> is a fork of the GWT UiBinder with added abilities, this project is a base framework to use that added code interception feature.</p>

<p>Note: at the current state, the API and the "test classes" are mixed together because this project is aimed to be a demo. You can however reuse a lot of classes and interfaces in this code. In any case you'll be obliged to download the sources and adjust the code for your needs. So consider it as a scaffold project for now</p>

<p>The main classes you should look at are the following:</p>

<pre><code>1.  ProfileSpecificWidgetCreator which contains the logic on how to change the look of any widget
2.  fr.onevu.auth.server.auth.Profile you'll have to change this server side class that specifies the behavior of your widgets (this is typically a check of the connected profile, then a database reading of the settings associated to the profile roles)
3.  /Auth/war/profile.jsp this file uses the answer of the server class Profile to load the settings into the page. You must do a &lt;%@include file="profile.jsp" %&gt; in your module html file to be able to grab the info from the server.
</code></pre>

<p>This code is the key to understand the initialization process, it's the Module startup code</p>

<pre><code>public class Auth implements EntryPoint {
    public void onModuleLoad() {
        RootPanel profilePanel = RootPanel.get("profile");
        if (profilePanel == null)
            return;

        String rulesJson = profilePanel.getElement().getInnerHTML().trim();
        if (rulesJson == null || 0 == rulesJson.length())
            return;

        ProfileWidgetJsonSerializer jsonSerializer = new ProfileWidgetJsonSerializer();

//here the rules get injected to the client : you can start using UiBinder from now 

      ProfileSpecificWidgetCreator.setProfileWidgetRules(jsonSerializer.deserializeFromJson(rulesJson));

**//by inheriting this module, you can be sure when it comes to your code, all is correctly initialized**
}
</code></pre>

<h3>
<a name="deeper-reading" class="anchor" href="#deeper-reading"><span class="octicon octicon-link"></span></a>Deeper reading</h3>

<p>This project is a default implementation of UiBinderAuth, it is in this separate project because it provides some data structure to hold the abstract concepts in <a href="https://github.com/ziedHamdi/UiBinderAuth">UiBinderAuth</a></p>

<p>Classes declared in this project can be directly reused/extended in your project. You'll have to implement the service that tells the client which field of which UiBinder file has to be handled specifically for the connected user. The server knows who is connected on the other side of the lane, so it can give display directives on GWT application startup. If the user connects or has rule changes, a page reload will be necessary. But this kind of changes is rare enough to justify a page reload.</p>

<p>Cases where the widgets display may be impacted in an application wide context are for example: </p>

<ul>
<li>a user with a certain role (manager, visitor, none, administrator)</li>
<li>a user loosing access to some features (eg. credit insufficient, administrator forbidding functionality to a given user, etc...) </li>
<li>a user decides to change the styles (personalize his 'desktop' theme)</li>
<li>the application state changes (maintenance) and allows restricted access</li>
<li>a bonus temporary feature for the user (for his birthday :-) )</li>
<li>add tooltips and helps to widgets if the user is new to the platform</li>
<li>notify the user of warning states on login (that may be consumed after)</li>
</ul><p>Since the library UiBinderAuth is specialized in UiBinder interception, it will not natively work with manually created widgets. But we strongly recommend that each created widget passes through the gateway method ContextSpecificWidgetCreator#init(). This will allow to have a uniform authorization handling controller. This can be achieved through the ClienFactory pattern that is anyway recommended.</p>

<p>Later, this library might include a widget cache, that will make it possible to provide runtime services (as opposed to startup services):</p>

<ul>
<li>adding handlers to detect EventBus events related to Widget display mode and update the cached visible widgets</li>
<li>react asynchoneously by asking to update the information relative to the role/ as display information</li>
<li>provide an interface with the available widget 'namepsaces' (UiBinder file + field || hand written scope + field) to edit the widget attributes</li>
<li>allow to display validation messages next to the concerned widget in a central manner (if a widget is detected to have validation issues, it is get from cache and manipulated to display a message next to it)
Your help and suggestions are naturally welcome</li>
</ul>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/ziedHamdi/UiBinderAutho/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/ziedHamdi/UiBinderAutho/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/ziedHamdi/UiBinderAutho"></a> is maintained by <a href="https://github.com/ziedHamdi">ziedHamdi</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UiBinderAutho");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>